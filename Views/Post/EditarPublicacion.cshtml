@{
    ViewData["Title"] = "Editar Publicacion";
    var publicacion = ViewBag.Publicacion;

    string etiquetasExistentes = "";
    List<ReEstrena.Models.Etiqueta> listaEtiquetas = ViewBag.Etiquetas as List<ReEstrena.Models.Etiqueta>;

    if (listaEtiquetas != null)
    {
        if (listaEtiquetas.Any()) 
        {
            etiquetasExistentes = string.Join(" ", listaEtiquetas.Select(e => e.Nombre));
        }
    }
}


<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/css/site.css">
</head>
<body>
    <header>
        <div>
            <a href="@Url.Action("VerPaginaPrincipalV", "Account")">
                <img src="~/imagenes/logo.png" alt="Logo Re-Estrena">
                <h1>Re-Estrena</h1>
            </a>
            <nav>
                <ul>
                    <li><a href='@Url.Action("VerPaginaPrincipalC", "Account")' onclick="validar(this)">Comprar</a></li>
                    <li><a href='@Url.Action("subirPublicacion", "Post")'><img src="~/imagenes/mas.png" alt="Subir" title="Subir"></a></li>
                    <li><a href='@Url.Action("VerPaginaPrincipalV", "Account")'><img src="~/imagenes/perfil.png" alt="Usuario" title="Usuario"></a></li>
                    <li><a href='@Url.Action("VerNotificacionesV", "Account")'><img src="~/imagenes/campana.png" alt="Notificaciones" title="Notificaciones"></a></li>
                    <li><a href='@Url.Action("VerMensajesV", "Account")'><img src="~/imagenes/mensaje.png" alt="Mensajes" title="Mensajes"></a></li>
                </ul>
            </nav>
        </div>
    </header>


<main >
        <section class="unaPublicacion">
            <form method="post" action='@Url.Action("VerPaginaPrincipalV", "Account")'class="emoji">
                <button type="submit"><img src="~/imagenes/tacho.png" alt="volver"></button>
            </form>
        
            <form action='@Url.Action("editarPublicacionGuardar", "Post")' method="post" enctype="multipart/form-data" class="todo">
                
                <input type="hidden" name="idPub" value="@publicacion.IdPublicacion">

                <div class="fotoPub">
                    <label for="foto">Selecciona una imagen de producto:</label>
                    <select id="foto" name="Foto" required class="select-imagen-producto">
                        <option value="" disabled selected>-- Elige una imagen --</option>
                        <option value="zapatos.webp">Zapatos</option>
                        <option value="minifalda.webp">Minifalda</option>
                        <option value="remera.webp">Remera</option>
                    </select>
                    <div class="preview-container">
                        <img id="previewImg" src="" alt="Vista previa del producto" style="display: none;">
                    </div>
                </div>
                <div class="infoPub">
                    <input type="text" id="nombreProducto" name="nombreProducto" placeholder="Nombre del producto" value="@(publicacion != null ? publicacion.NombreProducto : "")">
                    <textarea id="descripcion" name="descripcion" rows="8" cols="30" placeholder="InformaciÃ³n del producto">@(publicacion != null ? publicacion.Descripcion : "")</textarea>
                </div>
                <div class="etiquetasPub">
                    <input type="text" id="etiquetas" name="etiquetas" placeholder="Agregar etiquetas, tenes que volver a escribir todas" value="@etiquetasExistentes">
                </div>
                <div class="precioPub">
                    <input type="number" id="precio" name="precio" placeholder="Precio:" min="0" step="1.00" value="@(publicacion != null ? publicacion.Precio : 0)">
                </div>
                
                <div class="botonPub">
                    <button type="submit">Guardar Cambios</button>
                </div>
            </form>
        </section>
        @if(ViewBag.ErrorMessage != null)
        {
            <p>@ViewBag.ErrorMessage</p>
        }
        <script asp-src-include="~/js/site.js"></script>
</main>


</body>
</html>

